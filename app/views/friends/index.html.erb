<%# ============================================ %>
<%# ðŸ· TASTE & DRINK - PAGE MES AMIS %>
<%# Liste des amis avec cards horizontales %>
<%# ============================================ %>

<div class="container">
  <%# === EN-TÃŠTE DE PAGE === %>
  <div class="td-page-header">
    <h1 class="td-page-title">Mes Amis</h1>
    <p class="td-page-subtitle"><%= @friends.count %> ami<%= @friends.count > 1 ? 's' : '' %> dans votre cercle</p>
  </div>

  <%# === LISTE DES AMIS === %>
  <% if @friends.any? %>
    <div class="td-friends-list">
      <% @friends.each do |friend| %>
        <%= link_to user_path(friend) do %>
          <div class="td-card td-friend-card">
            <%# === AVATAR === %>
            <div class="td-friend-avatar">
              <% if friend.respond_to?(:photo) && friend.photo.attached? %>
                <%= image_tag friend.photo, alt: "#{friend.first_name}" %>
              <% else %>
                <span class="td-friend-initials">
                  <%= friend.first_name&.first || '?' %><%= friend.last_name&.first %>
                </span>
              <% end %>
            </div>

            <%# === INFOS === %>
            <div class="td-friend-info">
              <%# Nom complet %>
              <h3 class="td-friend-name"><%= friend.first_name %></h3>
              <p class="td-friend-lastname"><%= friend.last_name %></p>

              <%# Badges rÃ©gime et allergie %>
              <div class="td-friend-badges">
                <% if friend.diet.present? %>
                  <span class="td-friend-badge td-badge-diet">
                    <i class="fas fa-leaf"></i>
                    <%= friend.diet %>
                  </span>
                <% end %>

                <% if friend.allergy.present? %>
                  <span class="td-friend-badge td-badge-allergy">
                    <i class="fas fa-exclamation-triangle"></i>
                    <%= friend.allergy %>
                  </span>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

  <% else %>
    <%# === Ã‰TAT VIDE === %>
    <div class="td-friends-empty">
      <div class="td-empty-icon">
        <i class="fas fa-user-friends"></i>
      </div>
      <h3>Aucun ami pour l'instant</h3>
      <p>Ajoutez des amis pour partager vos moments gastronomiques</p>
    </div>
  <% end %>
</div>
