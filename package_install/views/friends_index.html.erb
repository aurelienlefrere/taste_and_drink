<%# ============================================ %>
<%# ðŸ· TASTE & DRINK - PAGE MES AMIS %>
<%# Liste des amis avec cards horizontales %>
<%# ============================================ %>

<div class="container">
  <%# === EN-TÃŠTE DE PAGE === %>
  <div class="td-page-header">
    <h1 class="td-page-title">Mes Amis</h1>
    <p class="td-page-subtitle"><%= @friends.count %> ami<%= @friends.count > 1 ? 's' : '' %> dans votre cercle</p>
  </div>

  <%# === LISTE DES AMIS === %>
  <% if @friends.any? %>
    <div class="td-friends-list">
      <% @friends.each do |friend| %>
        <%= link_to user_path(friend) do %>
          <div class="td-friend-card-new">
            <%# === HEADER : Avatar + Nom === %>
            <div class="td-friend-header">
              <%# Avatar %>
              <div class="td-friend-avatar-new">
                <% if friend.respond_to?(:photo) && friend.photo.present? %>
                  <%= image_tag friend.photo, alt: "#{friend.first_name}" %>
                <% else %>
                  <span class="td-friend-initials">
                    <%= friend.first_name&.first || '?' %><%= friend.last_name&.first %>
                  </span>
                <% end %>
              </div>
              
              <%# Nom et prÃ©nom %>
              <div class="td-friend-name-block">
                <h3><%= friend.first_name %> <%= friend.last_name %></h3>
              </div>
            </div>
            
            <%# === DIET ET ALLERGY (cÃ´te Ã  cÃ´te) === %>
            <% if friend.diet.present? || friend.allergy.present? %>
              <div class="td-friend-badges-row">
                <% if friend.diet.present? %>
                  <span class="td-friend-badge td-badge-diet">
                    <i class="fas fa-leaf"></i>
                    <%= friend.diet %>
                  </span>
                <% end %>
                
                <% if friend.allergy.present? %>
                  <span class="td-friend-badge td-badge-allergy">
                    <i class="fas fa-exclamation-triangle"></i>
                    <%= friend.allergy %>
                  </span>
                <% end %>
              </div>
            <% end %>
            
            <%# === LIKES ET DISLIKES === %>
            <div class="td-friend-preferences">
              <% if friend.like.present? %>
                <div class="td-preference-item">
                  <i class="fas fa-heart text-success"></i>
                  <span class="td-preference-label">Aime :</span>
                  <span class="td-preference-value"><%= friend.like %></span>
                </div>
              <% end %>
              
              <% if friend.dislike.present? %>
                <div class="td-preference-item">
                  <i class="fas fa-heart-broken text-danger"></i>
                  <span class="td-preference-label">N'aime pas :</span>
                  <span class="td-preference-value"><%= friend.dislike %></span>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

  <% else %>
    <%# === Ã‰TAT VIDE === %>
    <div class="td-friends-empty">
      <div class="td-empty-icon">
        <i class="fas fa-user-friends"></i>
      </div>
      <h3>Aucun ami pour l'instant</h3>
      <p>Ajoutez des amis pour partager vos moments gastronomiques</p>
    </div>
  <% end %>
</div>
